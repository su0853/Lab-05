# Lab-05_2
## 題目
資料基本包含：
顧客：顧客ID、顧客姓名、Email、電話號碼、完整送貨地址 (街道、城市、郵遞區號、國家)。

產品：產品ID、產品名稱、產品描述、單價、庫存數量、供應商名稱、供應商聯絡方式。

訂單：訂單ID、顧客ID、顧客姓名、訂單日期、訂單總金額、產品ID (多個)、產品名稱 (多個)、購買數量 (對應每個產品)、單價 (對應每個產品)。
## 相依性

### 函數相依性
* 顧客:
  * (顧客ID ->顧客姓名、Email、電話號碼、完整送貨地址 (街道、城市、郵遞區號、國家))
* 產品:
  * (產品ID->產品名稱、產品描述、單價、庫存數量、供應商名稱)
  * (供應商名稱->供應商聯絡方式)
* 訂單:
  * (訂單ID->顧客ID、訂單日期、訂單總金額、產品ID (多個)、購買數量 (對應每個產品))
  * (顧客ID->顧客姓名)
  * (產品ID->產品名稱 (多個)、單價 (對應每個產品))
## 問題
識別問題與函數相依性：
分析上述初步收集的資料，找出潛在的資料重複、插入異常、更新異常和刪除異常。
列出所有合理的函數相依性。

* 顧客
  * 資料重複：
  * 插入異常：
  * 更新異常：
  * 刪除異常：
  
  
* 產品
  * 資料重複：
    * 供應商名稱
    * 供應商聯絡方式
  * 插入異常：當產品還未加入時無法儲存供應商名稱、供應商聯絡方式
  * 更新異常：
    * 供應商名稱
    * 供應商聯絡方式
  * 刪除異常：
    * 當刪除的產品在表中只有一個時,會導致供應商的資訊遺失

* 訂單
  * 資料重複：
   * 顧客姓名
    * 產品名稱
    *  單價
    *  訂單總金額(一個訂單多個產品)
    *  訂單日期(一個訂單多個產品)
  * 插入異常：
  * 更新異常：
    * 顧客姓名
    * 產品名稱
    *  訂單總金額(一個訂單多個產品)
    *  訂單日期(一個訂單多個產品)
  * 刪除異常：
## 合理的函數相依性
顧客：顧客ID、顧客姓名、Email、電話號碼、完整送貨地址 (街道、城市、郵遞區號、國家)。

供應商:供應商ID、供應商名稱、供應商聯絡方式。

產品：產品ID、產品名稱、產品描述、單價、庫存數量、供應商ID。

訂單：訂單ID、顧客ID、訂單日期

訂單細項:訂單ID、產品ID (多個)、購買數量 (對應每個產品)。

## 正規化設計
### 函數相依性
* 顧客：
  * (顧客ID->顧客姓名、Email、電話號碼、完整送貨地址 (街道、城市、郵遞區號、國家))。

* 供應商:
  * (供應商ID、供應商名稱、供應商聯絡方式)。

* 產品：
  * (產品ID->產品名稱、產品描述、單價、庫存數量、供應商ID。)

* 訂單：
  * (訂單ID->顧客ID、訂單日期)

* 訂單細項:
  * (訂單ID、產品ID (多個)->購買數量 (對應每個產品)。)

### 分析與說明 
* 顧客
  * 資料重複：
  * 插入異常：
  * 更新異常：
  * 刪除異常：
  
  
* 產品
  * 資料重複：
    * 供應商名稱
    * 供應商聯絡方式
  * 插入異常：當產品還未加入時無法儲存供應商名稱、供應商聯絡方式(供應商(表))
  * 更新異常：
    * 供應商名稱
    * 供應商聯絡方式
  * 刪除異常：
    * 當刪除的產品在表中只有一個時,會導致供應商的資訊遺失(供應商(表))
### #  產品與供應商在商品的表中都是主鍵後面都有相依的屬性代表在資料列中並沒有唯一的主鍵(違反1NF)
     修正:建立供應商的表
* 訂單
  * 資料重複：
   * 顧客姓名
    * 產品名稱
    *  單價
    *  訂單總金額(一個訂單多個產品)
    *  訂單日期(一個訂單多個產品)
  ### # 多個產品在訂單的表中是多值不符合原子性(違反1NF)
        修正:建立訂單細項:訂單ID、產品ID (多個)、產品名稱 (多個)、購買數量 (對應每個產品)、單價。
        訂單:訂單ID、顧客ID、顧客姓名、訂單日期
  * 插入異常：
  * 更新異常：
    * 顧客姓名
    * 產品名稱
    *  訂單總金額(一個訂單多個產品)
    *  訂單日期(一個訂單多個產品)
  * 刪除異常：
### # 訂單ID與產品ID為訂單細項的複合主鍵產品名稱與單價只相依於產品ID沒有完全依賴複合主鍵(違反2NF)
    修正:訂單細項:訂單ID、產品ID (多個)、購買數量 (對應每個產品)。
    
### # 顧客姓名相依於訂單中的顧客ID但訂單的顧客ID是相依於訂單ID存在傳遞相依(違反3NF)
    修正:訂單：訂單ID、顧客ID、訂單日期